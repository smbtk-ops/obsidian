Команда cpio используется для упаковки и распаковки архивов в Linux/Unix-системах.

Работает вместе с командами вроде find, ls, или напрямую с файлами, считая список файлов из стандартного ввода.

## **Основные ключи команды cpio**

|**Ключ**|**Описание**|**Пример использования**|
|---|---|---|
|-o|(copy-out) — создать архив из списка файлов.|`find . -type f|
|-i|(copy-in) — распаковать файлы из архива.|cpio -i < archive.cpio|
|-p каталог|(copy-pass) — копировать файлы из одного каталога в другой, сохраняя структуру.|`find . -type f|
|-v|Показать список обрабатываемых файлов (verbose).|cpio -ov < filelist.txt > archive.cpio|
|-d|Создавать директории по необходимости при распаковке.|cpio -idv < archive.cpio|
|-u|Перезаписывать существующие файлы без запроса подтверждения.|cpio -idu < archive.cpio|
|-t|Показать содержимое архива без извлечения.|cpio -t < archive.cpio|
|-m|Сохранять дату и время последней модификации файлов при копировании/распаковке.|cpio -idm < archive.cpio|
|--no-absolute-filenames|Избавляться от ведущего / в путях при извлечении.|cpio -id --no-absolute-filenames < archive.cpio|

## **Примеры использования cpio**

### **1. Создать архив из текущего каталога**
```
find . -type f | cpio -o > archive.cpio
```

### **2. Распаковать архив в текущую директорию**
```
cpio -idv < archive.cpio
```

### **3. Показать содержимое архива**
```
cpio -t < archive.cpio
```

### **4. Копировать файлы в другую директорию, сохраняя структуру**
```
find . -type f | cpio -pdm /path/to/destination/
```

## **Типичный пайплайн работы с cpio**

Создать архив:
```
find /etc -name "*.conf" | cpio -ov > configs_backup.cpio
```

Распаковать архив:
```
mkdir restored_configs
cd restored_configs
cpio -idv < ../configs_backup.cpio
```


## **Замечания**
- cpio **не умеет** самостоятельно искать файлы — список нужно передавать через стандартный ввод.
- Часто используется для создания initramfs образов в Linux.
- Поддерживает разные форматы архивов (newc, crc, odc и др.), можно указать через опцию --format=....
