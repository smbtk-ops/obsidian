## **Краткое содержание Email в Linux**

### **Основные протоколы**

|**Протокол**|**Назначение**|**Особенности**|
|---|---|---|
|SMTP|Отправка писем|Используется клиентами (MUA) и серверами (MSA/MTA)|
|POP|Получение писем|Письма загружаются и удаляются с сервера|
|IMAP|Получение писем|Письма остаются на сервере, доступны с разных устройств|
|_+TLS_|Шифрование трафика|Используется поверх всех протоколов для безопасности|
### **Архитектура email-системы**

|**Компонент**|**Расшифровка**|**Назначение**|
|---|---|---|
|MUA|Mail User Agent|Почтовый клиент (например, mail)|
|MSA|Mail Submission Agent|Получает письма от клиента|
|MTA|Mail Transfer Agent|Отправляет письмо другому серверу|
|MDA|Mail Delivery Agent|Доставляет письмо получателю|
|CC / BCC|Копии писем|CC видно всем, BCC — скрыто|

### **Почтовые серверы в Linux**

| **Сервер**      | **Особенности**                                           |
| --------------- | --------------------------------------------------------- |
| **[[Postfix]]** | Модульный, безопасный, простой, используется по умолчанию |
| Sendmail        | Устаревший, сложная конфигурация                          |
| Exim            | Простой конфиг, но менее распространён                    |

### **Установка и использование Postfix (локально)**

```
sudo apt install postfix mailutils
```

> Выбрать _“Local only”_ при установке

### **Отправка писем**
```
mail username
# вводим Subject, тело письма, затем Ctrl+D
```

**Отправка письма без интерактива:**
```
echo "Тело письма" | mail -s "Тема письма" root
```

### **Чтение писем**
```
mail
# Пример вывода:
# >N 1 ubuntu@test ... test2
```

|**Команда в** mail|**Назначение**|
|---|---|
|1 или p|Прочитать письмо|
|q|Выйти и сохранить в mbox|
|d|Удалить письмо|

**Просмотр mbox:**
```
cat ~/mbox
```
