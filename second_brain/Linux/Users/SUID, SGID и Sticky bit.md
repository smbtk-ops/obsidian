# **Специальные атрибуты файлов в Linux**

## **Идентификаторы пользователей**
- **UID** — идентификатор пользователя (числовой).
- **GID** — идентификатор группы (числовой).
- Строковые имена сопоставляются через /etc/passwd и /etc/group.

## **SUID (Set User ID)**

|**Описание**|**Программа выполняется с правами владельца файла.**|
|---|---|
|Где используется|Например, passwd, чтобы менять пароль в /etc/shadow.|
|Символ в ls -l|4-я позиция: s|
|Установка|chmod 4755 file или chmod u+s file|
|Снятие|chmod 0755 file или chmod u-s file|

**Пример:**
```
ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 59640 мар 22 2019 /usr/bin/passwd
```

## **SGID (Set Group ID)**

|**Описание**|**Программа выполняется с правами группы файла. Для каталогов: новые файлы наследуют группу.**|
|---|---|
|Где используется|Общие каталоги для нескольких пользователей.|
|Символ в ls -l|7-я позиция: s|
|Установка|chmod 2755 dir или chmod g+s dir|
|Снятие|chmod 0755 dir или chmod g-s dir|

**Пример:**
```
chmod 2755 /var/tmp/common
ls -ld /var/tmp/common
drwxr-sr-x 2 root common 4096 апр 27 22:10 /var/tmp/common
```

## **Sticky Bit**

|**Описание**|**В каталоге удалять файл может только его владелец.**|
|---|---|
|Где используется|Папка /tmp, общие каталоги.|
|Символ в ls -l|10-я позиция: t|
|Установка|chmod 1755 dir или chmod +t dir|
|Снятие|chmod -t dir|

**Пример:**
```
chmod 1777 /tmp
ls -ld /tmp
drwxrwxrwt 10 root root 4096 апр 27 22:15 /tmp
```

## **Числовое представление прав со спецбитами**

|**Спецбит**|**Значение**|
|---|---|
|SUID|4000|
|SGID|2000|
|Sticky Bit|1000|

**Комбинации:**
- SUID + SGID + Sticky Bit = chmod 7777 file
- Только SUID = chmod 4755 file
- Только SGID = chmod 2755 file
- Только Sticky = chmod 1755 file

## **Особенности отображения спецбитов в ls -l**
Отлично! Вот готовая красивая таблица для твоей вики в Markdown:

---

# **Отображение спецбитов в выводе ls -l**

| **Символ**    | **Где появляется** | **Что установлено**       | **Есть ли право на исполнение?** | **Значение**                       |
| ------------- | ------------------ | ------------------------- | -------------------------------- | ---------------------------------- |
| s (строчная)  | 4-я или 7-я буква  | SUID (4-я) или SGID (7-я) | Да                               | Спецбит + право на исполнение      |
| S (заглавная) | 4-я или 7-я буква  | SUID (4-я) или SGID (7-я) | Нет                              | Спецбит без права на исполнение    |
| t (строчная)  | 10-я буква         | Sticky Bit                | Да                               | Sticky Bit + право на исполнение   |
| T (заглавная) | 10-я буква         | Sticky Bit                | Нет                              | Sticky Bit без права на исполнение |

# **Примеры**

|**Права**|**Что это значит**|
|---|---|
|-rwsr-xr-x|Установлен **SUID**, право на исполнение есть|
|-rwSr-xr-x|Установлен **SUID**, права на исполнение нет|
|drwxr-sr-x|Установлен **SGID** на каталог, исполнение разрешено|
|drwxr-Sr-x|Установлен **SGID**, права на исполнение нет|
|drwxrwxrwt|Установлен **Sticky Bit** на каталог, исполнение разрешено|
|drwxrwxrwT|Установлен **Sticky Bit**, права на исполнение нет|

- **s** = спецбит + исполнение
- **S** = спецбит без исполнения
- **t** = sticky bit + исполнение
- **T** = sticky bit без исполнения


[[Поиск файлов с установленными SUID и SGID]]
[[Limits]]