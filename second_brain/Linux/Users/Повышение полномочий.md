`su prometheus -c whoami`    -    данная команда выведет **prometheus**

1. Вызов интерактивной оболочки — `sudo -i`.
2. Вызов команды от имени суперпользователя — `sudo COMMAND`.
3. Вызов команды от пользователя, отличного от суперпользователя — `sudo -u USER COMMAND`.

Главное отличие `sudo` от `su` — при запросах запрашивается не пароль пользователя, от которого вы пытаетесь запустить команду, а пароль того пользователя, от **чьего имени** вы вызываете `sudo`.

настроить вызов команды `sudo` можно в /etc/sudoers, через `sudo visudo`

- `whoami` — показывает имя пользователя, под которым выводится текущая команда;
- `w` — позволяет вывести всех подключенных на данный момент пользователей системы;
- `id` — выводит информацию о текущем пользователе и группах, в которых он состоит;
- `groups` — выводит все группы, в которых состоит текущий пользователь;
- `visudo` — позволяет редактировать конфигурационный файл /etc/sudoers с возможностью отката.
  
  синтаксис файла `/etc/sudoers`:

  - формат команды для пользователя/группы: `User Host = (Runas) Options Command`
  
  - `%sudo ALL=(ALL:ALL) NOPASSWD:ALL` —  кто состоит в группе **sudo**, на всех `(ALL)` хостах от имени всех пользователей и групп `(ALL:ALL)` без пароля `(NOPASSWD:)` запускать любую команду `(ALL)`


  `%разработчики ALL=(ALL) NOPASSWD: /usr/bin/systemctl restart apache2`

    - `%разработчики` — правило применяется ко всем пользователям, входящим в группу _разработчики_.
    - `ALL=(ALL)` — правило действует на всех хостах от имени любого пользователя.
    - `NOPASSWD:` — не требует ввода пароля для выполнения команды (эта опция опциональна).
    - `/usr/bin/systemctl restart apache2` — конкретная команда, выполнение которой разрешено.


su - устаревший вариант, не желателен к использованию так как небезопасен

|   |   |   |
|---|---|---|
|**что хотим сделать?**|**правильно**|**неправильно**|
|выполнить команду от имени root|sudo command|~~su -c «command»~~|
|отредактировать файл от имени root|sudoedit file|~~su vim file~~  <br>~~sudo vim file~~|
|получить оболочку root|sudo -i|~~su -~~  <br>~~sudo su -~~|

----
- [su или sudo?](https://habr.com/ru/post/44783/)
- [How To Edit the Sudoers File](https://www.digitalocean.com/community/tutorials/how-to-edit-the-sudoers-file)

----

[[Работа с пользователями]]
